I"Ë<p>####Table Of Contents</p>

<ul>
  <li><a href="/courses/twitter-clone/3/1">3.1 Connecting To MySQL</a></li>
  <li><strong>3.2 Creating The Database And Tweets Table</strong></li>
  <li><a href="/courses/twitter-clone/3/3">3.3 Inserting Some Tweets Into Our Database</a></li>
  <li><a href="/courses/twitter-clone/3/4">3.4 Connecting The Tweet Form To Our Web Server</a></li>
</ul>

<p>We are now connect to our MySQL server, but we donâ€™t have a database yet.  In this section, weâ€™ll be creating a database and a table in that database called â€œTweetsâ€.  Before we can do this, letâ€™s go over what databases are and how they work.</p>

<p>###Understanding Databases</p>

<p>A database is a collection of data that is organized so that itâ€™s easy to read, write, update and destroy data.  There are many ways to organize data and different database formats are better at some things than others.</p>

<p>For our database, we are going to use a fairly general purpose database called MySQL.  MySQL is a relational database that is commonly used around the industry.  A relational database formats itâ€™s data so that itâ€™s easy to find related data quickly.  An example of related data would be a Tweet would have a User related to it that created the Tweet.</p>

<p>Relational databases like MySQL are made up of tables.  Tables are used to contain specific sets of information.  For instance, we could have a table for Tweets and another table for Users.  In this course, we are only going to have a single â€œTweetsâ€ table.</p>

<p>Tables are made up of columns that define what data we want to store and rows that are each entry in our table.  For our â€œTweetsâ€ table, we are going to have â€œhandleâ€ and â€œbodyâ€ columns since we want to store those values and each row will be a tweet.  Our â€œTweetsâ€ table could look like the following.  The first row is the column names and the rest are rows each containing an individual tweet.</p>

<p><img src="https://s3.amazonaws.com/spark-school/courses/twitter-clone/3/tweets-table-example.png" alt="" /></p>

<p>To read and modify this data, we use the SQL query language.  MySQL uses the SQL language to run queries on the database.  We will learn the different queries as we go, and all you need to know right now is that every SQL query ends with a semicolon.</p>

<p>###Creating Our Database</p>

<p>Right now, we are connected to the MySQL server but donâ€™t have a database for our project yet.  Creating databases is pretty straightforward and can simply be done with the â€œCREATE DATABASEâ€ command.</p>

<p>Letâ€™s create a database for our project with the name â€œtwitterâ€.  Run the following command in your MySQL GUI:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- SQL GUI Query Tab</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">twitter</span><span class="p">;</span>
</code></pre></div></div>

<p>Weâ€™ve created our database, now we need to select it as the database we want to use right now. We do that with the â€œUSEâ€ command, followed by the name of the database:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- SQL GUI Query Tab</span>
<span class="n">USE</span> <span class="n">twitter</span><span class="p">;</span>
</code></pre></div></div>

<p>With the â€œtwitterâ€ database selected, we can now create tables in the selected database.</p>

<p>###Creating The Tweets Table</p>

<p>We need to decide on a name for our table.  Generally you name it what the table contains.  For instance, our tables holds tweets so we are going to call it â€œTweetsâ€.  Table names are generally plural since they hold more than one entry and are capitalized.</p>

<p>We have a name for our table, but now we need to think about the data we want to store for our tweets.  At minimum, we need columns for the handle of the user that created the tweet and the text body of the tweet.  We also need a way to uniquely identify a tweet, so we need another column for an id.  We also want to store the date the tweet was created so we can display it with the tweet. So weâ€™ll need four columns: â€œidâ€, â€œhandleâ€, â€œbodyâ€, and â€œcreated_atâ€.</p>

<p>Now that we know what data we want to store, we can create a table with those columns in it.  Run this query in your MySQL GUI and  Iâ€™ll explain it in a bit:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- SQL GUI Query Tab</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Tweets</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="n">body</span> <span class="nb">TEXT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="n">handle</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="n">created_at</span> <span class="nb">TIMESTAMP</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The whole section is one query, but we format it with tabs and newlines to make it easier to read.  The semicolon marks the end of the query.</p>

<p>The â€œCREATE TABLE Tweetsâ€ part is telling MySQL to create a table named â€œTweetsâ€.  After that is the table definition inside parenthesis.  Each column is on a itâ€™s own line so itâ€™s easier to read.</p>

<p>The first line in the definition defines the â€œidâ€ column as an INT which is short for integer.  The â€œNOT NULLâ€ part says it canâ€™t be null or in other words there has to be a value.  The AUTO_INCREMENT part means that the column will be automatically set to an auto incrementing number starting at 1.  So the first row inserted will get an id of 1, the second a 2, and so on. This ensures each Tweet gets a unique id.</p>

<p>The next column is the body column and itâ€™s much simpler.  We give it a type of TEXT and make sure itâ€™s NOT NULL.</p>

<p>The â€œhandleâ€ column is of the VARCHAR type.  This stand for variable characters and the number in the parenthesis is the maximum number of characters it can be.</p>

<p>Why use VARCHAR over something like TEXT?  The database can optimize VARCHAR better than TEXT since it knows the max size possible.  So to keep things efficient, we use VARCHAR since Twitter handles canâ€™t be longer than 15 characters.</p>

<p>The last column is the â€œcreated_atâ€ column and it is of the TIMESTAMP type.  Timestamps columns store a specific moment in time. As before, we want to make sure itâ€™s NOT NULL and this time we are giving it a default of the CURRENT_TIMESTAMP.  This will set the â€œcreated_atâ€ column to the current time when a row is created.</p>

<p>The last line in the definition tells MySQL which column is the PRIMARY KEY for the table.  The PRIMARY KEY is the column we use to uniquely identify rows and in our case itâ€™s the â€œidâ€ column.  It also helps optimize when searching by id.</p>
:ET